SERVLET:

import java.io.*;
import java.sql.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.WebServlet;

@WebServlet("/TicketBookingServlet")
public class TicketBookingServlet extends HttpServlet {
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        String name = request.getParameter("passenger_name");
        String source = request.getParameter("source");
        String destination = request.getParameter("destination");
        String date = request.getParameter("travel_date");

        try {
            // Load MySQL Driver
            Class.forName("com.mysql.cj.jdbc.Driver");

            // Connect to DB (✅ empty password here, change if you set one)
            try (Connection con = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/ticket_booking", "root", "")) {
                
                // Insert ticket
                String sql = "INSERT INTO tickets (passenger_name, source, destination, travel_date) VALUES (?, ?, ?, ?)";
                PreparedStatement pst = con.prepareStatement(sql);
                pst.setString(1, name);
                pst.setString(2, source);
                pst.setString(3, destination);
                pst.setString(4, date);
                
                int result = pst.executeUpdate();
                
                if (result > 0) {
                    out.println("<h2> Ticket booked successfully!</h2>");
                } else {
                    out.println("<h2>❌ Error booking ticket.</h2>");
                }
                
                // Show all tickets
                Statement stmt = con.createStatement();
                ResultSet rs = stmt.executeQuery("SELECT * FROM tickets");
                
                out.println("<h3> Booked Tickets:</h3>");
                out.println("<table border='1'><tr><th>ID</th><th>Name</th><th>Source</th><th>Destination</th><th>Date</th></tr>");
                while (rs.next()) {
                    out.println("<tr><td>" + rs.getInt("ticket_id") + "</td><td>" +
                            rs.getString("passenger_name") + "</td><td>" +
                            rs.getString("source") + "</td><td>" +
                            rs.getString("destination") + "</td><td>" +
                            rs.getDate("travel_date") + "</td></tr>");
                }
                out.println("</table>");
            }
        } catch (Exception e) {
            e.printStackTrace(out); // show errors in browser
        } finally {
            out.close();
        }
    }
}


INDEX.html:

<!DOCTYPE html>
<html>
<head>
    <title>Ticket Booking</title>
</head>
<body>
    <h2>Book Your Ticket</h2>
    <form action="TicketBookingServlet" method="post">
        Name: <input type="text" name="passenger_name" required><br><br>
        Source: <input type="text" name="source" required><br><br>
        Destination: <input type="text" name="destination" required><br><br>
        Date: <input type="date" name="travel_date" required><br><br>
        <input type="submit" value="Book Ticket">
    </form>
</body>
</html>
