package com.onlineexam.controller;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import jakarta.servlet.http.HttpSession;
@Controller
public class ExamController {
    private final Map<Integer, String> correctAnswers = Map.of(
            1, "Delhi",
            2, "Java",
            3, "HyperText Markup Language"
    );
    @GetMapping("/")
    public String home() {
        return "redirect:/login";  // redirect to login page
    }
    @GetMapping("/login")
    public String loginPage() {
        return "login";
    }

    @PostMapping("/login")
    public String doLogin(@RequestParam String username,
                          @RequestParam String password,
                          HttpSession session, Model model) {
        if ("student".equals(username) && "1234".equals(password)) {
            session.setAttribute("user", username);
            return "redirect:/exam";
        }
        model.addAttribute("error", "Invalid login!");
        return "login";
    }

    @GetMapping("/exam")
    public String examPage(HttpSession session, Model model) {
        if (session.getAttribute("user") == null) return "redirect:/login";

        Map<Integer, String> qn = Map.of(
                1, "Capital of India?",
                2, "Which language is platform independent?",
                3, "HTML stands for?"
        );

        Map<Integer, List<String>> options = new HashMap<>();
        options.put(1, List.of("Delhi", "Mumbai", "Kolkata"));
        options.put(2, List.of("C", "Java", "Python"));
        options.put(3, List.of("HyperText Markup Language",
                               "HighText Machine Language",
                               "HyperTabular Markup Language"));

        model.addAttribute("questions", qn);
        model.addAttribute("options", options);
        return "exam";
    }

    @PostMapping("/submit")
    public String submitExam(@RequestParam Map<String,String> params,
                             HttpSession session, Model model) {
        int score = 0;
        for (int id : correctAnswers.keySet()) {
            String ans = params.get("q" + id);
            if (correctAnswers.get(id).equals(ans)) score++;
        }
        model.addAttribute("user", session.getAttribute("user"));
        model.addAttribute("score", score);
        model.addAttribute("total", correctAnswers.size());
return "result";
    }
}

package com.onlineexam;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class OnlineExamPortalApplication {

    public static void main(String[] args) {
        SpringApplication.run(OnlineExamPortalApplication.class, args);
    }
}
Login.html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Login</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <h2>Login</h2>
    <form th:action="@{/login}" method="post">
        Username: <input type="text" name="username"/>
        Password: <input type="password" name="password"/>
     <button type="submit">Login</button>
    </form>
    <p class="error" th:if="${error}" th:text="${error}"></p>
</div>
</body>
</html>
Exam.html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Exam</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <h2>Exam</h2>
    <form th:action="@{/submit}" method="post">
        <div th:each="q : ${questions}">
            <div class="question">
                <p th:text="${q.value}"></p>
                <div class="options" th:each="opt : ${options[q.key]}">
                    <input type="radio" th:name="'q' + ${q.key}" th:value="${opt}"/> <span th:text="${opt}"></span><br/>
                </div>
            </div>
        </div>
        <button type="submit">Submit Exam</button>
    </form>
</div>
</body>
</html>
Result.html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Result</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <h2>Exam Result</h2>
    <p>User: <span th:text="${user}"></span></p>
    <p>Score: <span th:text="${score}"></span> / <span th:text="${total}"></span></p>
    <a href="/login"><button>Back to Login</button></a>
</div>
</body>
</html>
Style.css
body {
    font-family: Arial, sans-serif;
 background-color: #f5f5f5;
    margin: 0;
    padding: 0;
}
.container {
    width: 400px;
    margin: 50px auto;
    padding: 30px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
h2 {
    text-align: center;
    color: #333;
}
form {
    display: flex;
    flex-direction: column;
}
input[type="text"], input[type="password"], select {
    padding: 8px;
    margin: 8px 0 15px 0;
    border: 1px solid #ccc;
    border-radius: 4px;}
button {
    padding: 10px;
    background-color: #4CAF50;
    border: none;
    color: white;
    font-size: 16px;
    border-radius: 4px;
    cursor: pointer;
}
button:hover {
    background-color: #45a049;
}
p.error {
    color: red;
    text-align: center;
}
.question {
    margin-bottom: 20px;
}
.options input {
    margin-right: 10px;
}
 
 



 
